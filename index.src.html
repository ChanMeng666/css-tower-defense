<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Te Pā Tiaki - Guardians of Aotearoa</title>
    <link rel="icon" type="image/svg+xml" href="assets/images/tower-defense-logo.svg">
    <link rel="apple-touch-icon" href="assets/images/tower-defense-logo.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- inject:css -->
    <!-- endinject -->
    <script src="vendor/prefixfree.min.js"></script>
    <script src="vendor/howler.min.js"></script>
</head>

<body>
    <!-- Unified Start Screen (Loading + Start combined) -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-bg"></div>

        <!-- Brand Logo -->
        <img src="assets/images/tower-defense-logo.svg" alt="Te Pā Tiaki" class="loading-logo">

        <!-- Game Title - Prominent above gateway -->
        <div class="loading-title-area">
            <h1 class="loading-game-title">TE PĀ TIAKI</h1>
            <p class="loading-subtitle">Guardians of Aotearoa</p>
        </div>

        <!-- Loading indicators -->
        <div class="loading-dots">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
        <div class="loading-progress">
            <div class="loading-progress-fill"></div>
        </div>

        <!-- Main action row: Map + Difficulty dropdowns + START -->
        <div class="loading-main-row">
            <div class="difficulty-dropdown" id="mapDropdown">
                <button class="difficulty-toggle" id="mapToggle">
                    <span id="mapLabel">Te Awa</span>
                    <span class="dropdown-arrow">▾</span>
                </button>
                <div class="difficulty-options hidden" id="mapOptions">
                    <button data-map="teAwa" class="selected">Te Awa <small>The River</small></button>
                    <button data-map="teMaunga">Te Maunga <small>The Mountain</small></button>
                    <button data-map="teMoana">Te Moana <small>The Ocean</small></button>
                </div>
            </div>
            <div class="difficulty-dropdown" id="difficultyDropdown">
                <button class="difficulty-toggle" id="difficultyToggle">
                    <span id="difficultyLabel">Normal</span>
                    <span class="dropdown-arrow">▾</span>
                </button>
                <div class="difficulty-options hidden" id="difficultyOptions">
                    <button data-difficulty="normal" class="selected">Normal</button>
                    <button data-difficulty="hard">Hard</button>
                    <button data-difficulty="expert">Expert</button>
                </div>
            </div>
            <button class="loading-start" id="startBtn">START GAME</button>
        </div>

        <!-- More Options (consolidated menu) -->
        <div class="more-options-container">
            <button class="more-options-btn" id="moreOptionsBtn">
                <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><rect x="2" y="3" width="14" height="2" fill="currentColor" rx="1"/><rect x="2" y="8" width="14" height="2" fill="currentColor" rx="1"/><rect x="2" y="13" width="14" height="2" fill="currentColor" rx="1"/></svg>
                More
            </button>
            <div class="more-options-menu hidden" id="moreOptionsMenu">
                <button id="leaderboardBtn">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><rect x="1" y="10" width="4" height="7" fill="#C4A030" stroke="currentColor" stroke-width="1"/><rect x="7" y="4" width="4" height="13" fill="#F2D864" stroke="currentColor" stroke-width="1"/><rect x="13" y="7" width="4" height="10" fill="#8B6914" stroke="currentColor" stroke-width="1"/><circle cx="9" cy="2" r="1.5" fill="currentColor"/></svg>
                    Leaderboard
                </button>
                <button id="challengeBtn" class="hidden">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><path d="M9 2 L11 7 L16 7 L12 10 L14 16 L9 12 L4 16 L6 10 L2 7 L7 7 Z" fill="#F2D864" stroke="currentColor" stroke-width="1"/></svg>
                    Daily Challenge
                </button>
                <button id="saveLoadBtn" class="hidden">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><rect x="2" y="2" width="14" height="14" rx="2" fill="#4A90C4" stroke="currentColor" stroke-width="1"/><rect x="5" y="2" width="8" height="5" fill="#2D8A8A" stroke="currentColor" stroke-width="1"/><rect x="7" y="3" width="4" height="3" fill="currentColor"/><rect x="5" y="10" width="8" height="4" rx="1" fill="currentColor" opacity="0.3"/></svg>
                    Load Game
                </button>
                <button id="statsBtn" class="hidden">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><rect x="2" y="12" width="3" height="4" fill="#5EA65E" stroke="currentColor" stroke-width="1"/><rect x="6" y="8" width="3" height="8" fill="#4A90C4" stroke="currentColor" stroke-width="1"/><rect x="10" y="5" width="3" height="11" fill="#D4738A" stroke="currentColor" stroke-width="1"/><rect x="14" y="2" width="3" height="14" fill="#F2D864" stroke="currentColor" stroke-width="1"/></svg>
                    My Stats
                </button>
                <button id="achievementsBtn">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><circle cx="9" cy="7" r="5" fill="#F2D864" stroke="currentColor" stroke-width="1"/><path d="M6 12 L5 17 L9 15 L13 17 L12 12" fill="#D4738A" stroke="currentColor" stroke-width="1"/><path d="M7 6 L8 8 L10 8 L8.5 9.5 L9 11 L7.5 9.5 L6 11 L6.5 9 L5 8 L7 8 Z" fill="currentColor" transform="translate(1.5, -1.5) scale(0.8)"/></svg>
                    Achievements
                </button>
                <button id="settingsMenuBtn">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18">
                        <circle cx="9" cy="9" r="3" fill="none" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M9 1v3M9 14v3M2.6 2.6l2.1 2.1M13.2 13.2l2.1 2.1M1 9h3M14 9h3M2.6 15.4l2.1-2.1M13.2 4.8l2.1-2.1" stroke="currentColor" stroke-width="1" stroke-linecap="round"/>
                    </svg>
                    Settings
                </button>
                <button id="developerBtn">
                    <svg class="menu-icon" viewBox="0 0 18 18" width="18" height="18"><circle cx="9" cy="5" r="3" fill="#4A90C4" stroke="currentColor" stroke-width="1"/><path d="M3 16 C3 12 6 10 9 10 C12 10 15 12 15 16" fill="#2D8A8A" stroke="currentColor" stroke-width="1"/><path d="M7 14 L8 15 L11 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                    Developer
                </button>
            </div>
        </div>

        <!-- Old elements kept for backwards compatibility (hidden via CSS) -->
        <div class="difficulty-select" id="difficultySelect">
            <span class="difficulty-label">Difficulty:</span>
            <button class="difficulty-btn selected" data-difficulty="normal">Normal</button>
            <button class="difficulty-btn" data-difficulty="hard">Hard</button>
            <button class="difficulty-btn" data-difficulty="expert">Expert</button>
        </div>
        <div class="start-menu-row" id="startMenuRow">
            <button class="start-menu-btn">Leaderboard</button>
            <button class="start-menu-btn start-menu-btn-challenge hidden">Daily Challenge</button>
        </div>
    </div>

    <!-- Developer Modal -->
    <div class="dev-modal hidden" id="devModal">
        <div class="dev-modal-content">
            <button class="dev-modal-close" id="devModalClose">&times;</button>
            <div class="dev-modal-header">
                <img src="assets/images/chan_logo.svg" alt="Chan Meng" class="dev-modal-logo">
                <div class="dev-modal-title">
                    <h2>Chan Meng</h2>
                    <p>Full-Stack Developer</p>
                </div>
            </div>
            <div class="dev-modal-body">
                <p class="dev-modal-cta">Need a custom website or web application?</p>
                <p class="dev-modal-desc">I build modern, responsive, and performant web experiences. Let's bring your ideas to life!</p>
                <div class="dev-modal-links">
                    <a href="mailto:chanmeng.dev@gmail.com" class="dev-modal-link dev-modal-link-primary">
                        <svg viewBox="0 0 20 20" width="18" height="18"><rect x="1" y="4" width="18" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M1 6 L10 12 L19 6" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>
                        Contact Me
                    </a>
                    <a href="https://github.com/ChanMeng666" target="_blank" rel="noopener" class="dev-modal-link">
                        <svg viewBox="0 0 20 20" width="18" height="18"><path d="M10 1C5.03 1 1 5.03 1 10c0 3.98 2.58 7.35 6.16 8.54.45.08.62-.2.62-.43v-1.5c-2.51.55-3.04-1.21-3.04-1.21-.41-1.04-1-1.32-1-1.32-.82-.56.06-.55.06-.55.9.06 1.38.93 1.38.93.8 1.38 2.1.98 2.62.75.08-.58.31-.98.57-1.2-2-.23-4.1-1-4.1-4.45 0-.98.35-1.79.93-2.42-.1-.23-.4-1.15.08-2.39 0 0 .76-.24 2.48.93a8.6 8.6 0 0 1 4.5 0c1.72-1.17 2.48-.93 2.48-.93.49 1.24.18 2.16.09 2.39.58.63.92 1.44.92 2.42 0 3.46-2.1 4.22-4.11 4.44.32.28.61.83.61 1.67v2.48c0 .24.16.52.62.43A9 9 0 0 0 19 10c0-4.97-4.03-9-9-9z" fill="currentColor"/></svg>
                        Portfolio
                    </a>
                    <a href="https://github.com/ChanMeng666/css-tower-defense" target="_blank" rel="noopener" class="dev-modal-link">
                        <svg viewBox="0 0 20 20" width="18" height="18"><path d="M10 1 L13 7 L19 7 L14 11 L16 18 L10 14 L4 18 L6 11 L1 7 L7 7 Z" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>
                        Star Project
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="game-over-screen hidden" id="gameOverScreen">
        <img src="assets/images/tower-defense-logo.svg" alt="Te Pā Tiaki" class="game-over-logo">
        <h1 class="game-over-title" id="gameOverTitle">Game Over</h1>
        <p class="final-score">Score: <span id="finalScore">0</span></p>
        <div class="game-over-stats hidden" id="gameOverStats">
            <div class="post-game-grid">
                <div class="post-stat"><span class="post-label">Waves</span><span class="post-value" id="goWaves">-</span></div>
                <div class="post-stat"><span class="post-label">Enemies</span><span class="post-value" id="goEnemies">-</span></div>
                <div class="post-stat"><span class="post-label">Towers</span><span class="post-value" id="goTowers">-</span></div>
                <div class="post-stat"><span class="post-label">Gold Earned</span><span class="post-value" id="goGold">-</span></div>
                <div class="post-stat"><span class="post-label">Time</span><span class="post-value" id="goDuration">-</span></div>
                <div class="post-stat"><span class="post-label">Rank</span><span class="post-value" id="goRank">-</span></div>
            </div>
        </div>
        <button class="restart-btn" id="restartBtn">Play Again</button>
        <button class="restart-btn return-menu-btn" id="returnMenuBtn">Return to Menu</button>
    </div>

    <!-- Game UI -->
    <div class="game-ui" id="gameUI">
        <div class="top-bar">
            <div class="stat">
                <span class="stat-icon"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="#E8635A" stroke="#1A1614" stroke-width="1.5"/><ellipse cx="8.5" cy="8" rx="2.5" ry="3" fill="rgba(255,255,255,0.3)" transform="rotate(-15 8.5 8)"/></svg></span>
                <span class="stat-value" id="lives">20</span>
            </div>
            <div class="stat">
                <span class="stat-icon"><svg viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="10" fill="#F2D864" stroke="#1A1614" stroke-width="1.5"/><circle cx="12" cy="12" r="7" fill="none" stroke="#C4A030" stroke-width="1.5"/><text x="12" y="16" text-anchor="middle" font-family="Bangers, Impact, sans-serif" font-size="11" font-weight="bold" fill="#C4A030">G</text></svg></span>
                <span class="stat-value" id="gold">100</span>
            </div>
            <div class="stat">
                <span class="stat-icon"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M2 16c2-3 4-5 6-5s3 3 5 3 3-3 5-3 4 2 5 5" fill="none" stroke="#4A90C4" stroke-width="2.5" stroke-linecap="round"/><path d="M2 12c2-3 4-5 6-5s3 3 5 3 3-3 5-3 4 2 5 5" fill="none" stroke="#4A90C4" stroke-width="2" stroke-linecap="round" opacity="0.5"/><circle cx="8" cy="9" r="1" fill="#FFF8F0" opacity="0.7"/><circle cx="13" cy="12" r="0.8" fill="#FFF8F0" opacity="0.5"/></svg></span>
                <span class="stat-value">Wave <span id="wave">1</span>/<span id="totalWaves">10</span></span>
            </div>
            <div class="stat">
                <span class="stat-icon"><svg viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="9" fill="none" stroke="#FFF8F0" stroke-width="2"/><circle cx="12" cy="12" r="5" fill="none" stroke="#FFF8F0" stroke-width="1.5"/><circle cx="12" cy="12" r="2" fill="#E8635A"/><line x1="12" y1="0" x2="12" y2="7" stroke="#FFF8F0" stroke-width="2"/><line x1="12" y1="17" x2="12" y2="24" stroke="#FFF8F0" stroke-width="2"/><line x1="0" y1="12" x2="7" y2="12" stroke="#FFF8F0" stroke-width="2"/><line x1="17" y1="12" x2="24" y2="12" stroke="#FFF8F0" stroke-width="2"/></svg></span>
                <span class="stat-value" id="score">0</span>
            </div>
            <div class="stat inventory-stat">
                <!-- Pipi (Shell) - Common -->
                <span class="stat-icon" title="Pipi (Shell)"><svg viewBox="0 0 24 24" width="24" height="24"><ellipse cx="12" cy="14" rx="8" ry="6" fill="#F5F5DC" stroke="#1A1614" stroke-width="1.5"/><path d="M4 14 Q12 8 20 14" fill="none" stroke="#D4C4A8" stroke-width="1.5"/><path d="M6 14 Q12 10 18 14" fill="none" stroke="#D4C4A8" stroke-width="1"/><ellipse cx="12" cy="14" rx="3" ry="2" fill="rgba(255,255,255,0.3)"/></svg></span>
                <span class="stat-value" id="invPipi">0</span>
                <!-- Koiwi (Bone) - Rare -->
                <span class="stat-icon" title="Koiwi (Carved Bone)"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M6 4 C4 4 3 6 4 8 L4 16 C3 18 4 20 6 20 C8 20 9 18 8 16 L8 8 C9 6 8 4 6 4" fill="#FFFFF0" stroke="#1A1614" stroke-width="1.2"/><path d="M18 4 C16 4 15 6 16 8 L16 16 C15 18 16 20 18 20 C20 20 21 18 20 16 L20 8 C21 6 20 4 18 4" fill="#FFFFF0" stroke="#1A1614" stroke-width="1.2"/><rect x="7" y="10" width="10" height="4" fill="#FFFFF0" stroke="#1A1614" stroke-width="1.2"/></svg></span>
                <span class="stat-value" id="invKoiwi">0</span>
                <!-- Pounamu (Greenstone) - Epic -->
                <span class="stat-icon" title="Pounamu (Greenstone)"><svg viewBox="0 0 24 24" width="24" height="24"><path d="M12 2 L20 10 L16 22 L8 22 L4 10 Z" fill="#3CB371" stroke="#1A1614" stroke-width="1.5"/><path d="M12 4 L8 10 L10 20" fill="none" stroke="rgba(255,255,255,0.4)" stroke-width="1.5"/><ellipse cx="11" cy="10" rx="2" ry="3" fill="rgba(255,255,255,0.25)" transform="rotate(-15 11 10)"/></svg></span>
                <span class="stat-value" id="invPounamu">0</span>
            </div>
        </div>

        <!-- Environment Bar -->
        <div class="env-bar" id="envBar">
            <div class="env-pill env-time" id="envTime" title="Time of Day">
                <svg class="env-icon" id="envTimeIcon" viewBox="0 0 24 24" width="18" height="18"></svg>
                <span class="env-label" id="envTimeLabel">Day</span>
            </div>
            <div class="env-pill env-weather" id="envWeather" title="Weather">
                <svg class="env-icon" id="envWeatherIcon" viewBox="0 0 24 24" width="18" height="18"></svg>
                <span class="env-label" id="envWeatherLabel">Clear</span>
            </div>
            <div class="env-pill env-season" id="envSeason" title="Season">
                <svg class="env-icon" id="envSeasonIcon" viewBox="0 0 24 24" width="18" height="18"></svg>
                <span class="env-label" id="envSeasonLabel">Summer</span>
            </div>
            <div class="env-pill env-event hidden" id="envEvent" title="Special Event">
                <span class="env-label" id="envEventLabel"></span>
            </div>
        </div>

        <!-- Battle Dashboard -->
        <div class="battle-dashboard" id="battleDashboard">
            <div class="dash-stat" title="Damage Per Second">
                <span class="dash-label">DPS</span>
                <span class="dash-value" id="dashDps">0</span>
            </div>
            <div class="dash-stat" title="Total Kills">
                <span class="dash-label">Kills</span>
                <span class="dash-value" id="dashKills">0</span>
            </div>
            <div class="dash-stat" title="Current Combo">
                <span class="dash-label">Combo</span>
                <span class="dash-value" id="dashCombo">0x</span>
            </div>
            <div class="dash-stat" title="Shot Accuracy">
                <span class="dash-label">Accuracy</span>
                <span class="dash-value" id="dashAccuracy">-</span>
            </div>
            <div class="dash-stat" title="Towers Built / Max Buildable">
                <span class="dash-label">Towers</span>
                <span class="dash-value" id="dashTowers">0</span>
            </div>
        </div>

        <!-- Tower Shop - Māori Weapons & Deities -->
        <div class="shop-panel" id="shopPanel">
            <div class="shop-title">Tū Atu (Defenders)</div>
            <div class="tower-options">
                <div class="tower-option" data-tower="taiaha" data-cost="50">
                    <div class="tower-preview tower-arrow-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Taiaha</span>
                        <span class="tower-cost">50g</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="mere" data-cost="100">
                    <div class="tower-preview tower-cannon-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Mere</span>
                        <span class="tower-cost">100g</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="tangaroa" data-cost="75">
                    <div class="tower-preview tower-ice-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Tangaroa</span>
                        <span class="tower-cost">75g</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="tohunga" data-cost="150">
                    <div class="tower-preview tower-magic-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Tohunga</span>
                        <span class="tower-cost">150g</span>
                    </div>
                </div>
                <!-- Māori Deities -->
                <div class="tower-option" data-tower="tawhiri" data-cost="200">
                    <div class="tower-preview tower-tesla-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Tāwhiri</span>
                        <span class="tower-cost">200g</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="mahuika" data-cost="250">
                    <div class="tower-preview tower-flame-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Mahuika</span>
                        <span class="tower-cost">250g</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wave Control -->
        <div class="wave-control">
            <button class="wave-btn" id="startWaveBtn">Start Wave</button>
        </div>

        <!-- Tech Tree + Craft Buttons -->
        <div class="tech-control">
            <button class="tech-btn" id="techBtn">Tech Tree</button>
            <button class="tech-btn" id="craftBtn">Craft</button>
            <button class="tech-btn save-game-btn hidden" id="saveGameBtn">Save (F5)</button>
        </div>
    </div>

    <!-- Tech Tree Modal -->
    <div class="tech-modal hidden" id="techModal">
        <div class="tech-content">
            <h2 class="tech-title">R&D LAB</h2>
            <div class="tech-stats">
                <span>Level: <span id="playerLevel">1</span></span>
                <span>SP: <span id="skillPoints">0</span></span>
            </div>
            <div class="tech-grid" id="techGrid">
                <!-- Upgrades injected by JS -->
            </div>
            <button class="close-tech-btn" id="closeTechBtn">&times;</button>
        </div>
    </div>


    <!-- Announcement Overlay -->
    <div class="announcement-overlay" id="announcer">
        <div class="announcement-content">
            <h1 class="announcement-title"></h1>
            <p class="announcement-subtitle"></p>
        </div>
    </div>

    <!-- Game Scene -->
    <div class="scene" id="scene">
        <!-- Day/Night Sky Cycle -->
        <div class="sky-cycle">
            <div class="sky-body-container">
                <div class="sun"></div>
                <div class="moon-comic"></div>
            </div>
        </div>

        <!-- Weather Overlay -->
        <div class="weather-overlay" id="weatherOverlay">
            <div class="rain-container hidden"></div>
            <div class="snow-container hidden"></div>
            <div class="wind-container hidden"></div>
        </div>

        <!-- Floating Particles -->
        <div class="particles"></div>

        <div class="map" id="map">
            <!-- Grid cells will be generated by JavaScript -->

            <!-- Enemy container (inside map for 3D transform) -->
            <div class="enemies" id="enemies"></div>

            <!-- Projectile container (inside map for 3D transform) -->
            <div class="projectiles" id="projectiles"></div>

            <!-- Tower container (inside map for 3D transform) -->
            <div class="towers" id="towers"></div>

            <!-- Ground Shadow -->
            <div class="ground-shadow"></div>
        </div>
    </div>

    <!-- Templates -->
    <div class="templates" style="display: none;">
        <!-- Enemy template -->
        <div class="enemy-template">
            <div class="enemy">
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Tower templates -->
        <div class="tower-arrow-template">
            <div class="tower tower-arrow">
                <div class="tower-base"></div>
                <div class="tower-body"></div>
                <div class="tower-top"></div>
                <div class="tower-turret"></div>
            </div>
        </div>

        <div class="tower-cannon-template">
            <div class="tower tower-cannon">
                <div class="tower-base"></div>
                <div class="tower-body"></div>
                <div class="tower-barrel"></div>
            </div>
        </div>

        <div class="tower-ice-template">
            <div class="tower tower-ice">
                <div class="tower-base"></div>
                <div class="tower-crystal"></div>
                <div class="tower-glow"></div>
            </div>
        </div>

        <div class="tower-magic-template">
            <div class="tower tower-magic">
                <div class="tower-base"></div>
                <div class="tower-orb"></div>
                <div class="tower-ring"></div>
            </div>
        </div>

        <!-- NEW TEMPLATES -->
        <div class="tower-tesla-template">
            <div class="tower tower-tesla">
                <div class="tower-base"></div>
                <div class="tower-coil"></div>
                <div class="tower-spark"></div>
            </div>
        </div>

        <div class="tower-flame-template">
            <div class="tower tower-flame">
                <div class="tower-base"></div>
                <div class="tower-tank"></div>
                <div class="tower-nozzle"></div>
            </div>
        </div>

        <!-- Projectile template -->
        <div class="projectile-template">
            <div class="projectile"></div>
        </div>
    </div>

    <!-- inject:js -->
    <!-- endinject -->
</body>

</html>