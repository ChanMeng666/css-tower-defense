// ===========================================
// CSS Tower Defense - Projectiles
// THEME: POP-ART / CEL-SHADED
// ===========================================

.projectile {
    position: absolute;
    .preserve-3d();
    pointer-events: none;
    z-index: 100;
}

// Arrow (Pencil/Dart look)
.projectile-arrow {
    width: 20px;
    height: 6px;
    background: @color-tower-arrow;
    .comic-border(2px);

    &::after {
        content: '';
        position: absolute;
        left: -10px;
        top: 2px;
        width: 15px;
        height: 2px;
        background: @color-black; // Speed line
    }
}

// Cannonball (Solid black sphere)
.projectile-cannon {
    width: 14px;
    height: 14px;
    background: @color-black;
    border-radius: 50%;

    // Shine
    &::before {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 4px;
        height: 4px;
        background: @color-white;
        border-radius: 50%;
    }
}

// Ice Shard (Jagged polygon)
.projectile-ice {
    width: 15px;
    height: 15px;
    background: @color-tower-ice;
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    // Clip path hides border often, use Drop Shadow hack or simple border on wrapper
    filter: drop-shadow(2px 2px 0 @color-black);
}

// Magic Orb (Spiral)
.projectile-magic {
    width: 16px;
    height: 16px;
    background: @color-white;
    border-radius: 50%;
    border: 4px solid @color-tower-magic;
    box-shadow: 2px 2px 0 @color-black;
}

// Tesla Bolt (ZigZag)
.projectile-tesla {
    width: 40px;
    height: 4px;
    background: @color-tower-tesla;
    transform-origin: center;
    clip-path: polygon(0% 40%, 30% 0%, 60% 80%, 100% 40%, 100% 60%, 70% 100%, 40% 20%, 0% 60%);
    box-shadow: 0 0 5px @color-white;
    animation: zap-flash 0.1s infinite;
}

@keyframes zap-flash {
    0% {
        opacity: 1;
    }

    50% {
        opacity: 0.5;
    }

    100% {
        opacity: 1;
    }
}

// Flame (Particle)
.projectile-flame {
    width: 12px;
    height: 12px;
    background: @color-tower-flame;
    border-radius: 50% 50% 0 50%;
    transform: rotate(45deg); // Teardrop shape
    box-shadow: 0 0 5px @color-yellow;
    opacity: 0.8;
}

// ===========================================
// IMPACT EFFECTS (Comic Text)
// ===========================================
.impact {
    position: absolute;
    pointer-events: none;
    z-index: 200;
    transform: translate(-50%, -50%);
}

.impact-arrow,
.impact-cannon,
.impact-ice,
.impact-magic,
.impact-tesla,
.impact-flame {
    animation: impact-pop 0.3s ease-out forwards;
}

.impact-tesla::after {
    content: 'ZZZT!';
    font-family: @font-title;
    color: @color-tower-tesla;
    .text-outline();
    font-size: 1.5rem;
}

.impact-flame::after {
    content: 'HOT!';
    font-family: @font-title;
    color: @color-danger;
    font-size: 1rem;
    transform: rotate(10deg);
}


.impact-arrow::after {
    content: 'POW!';
    font-family: @font-comic;
    font-weight: bold;
    font-size: 1.2rem;
    color: @color-yellow;
    .text-outline();
    transform: rotate(-15deg);
}

.impact-cannon::after {
    content: 'BOOM!';
    font-family: @font-title;
    font-size: 2rem;
    color: @color-danger;
    .text-outline();
    background: @color-white;
    padding: 2px 5px;
    .comic-border();
    transform: rotate(5deg);
}

.impact-ice::after {
    content: 'CRACK!';
    font-family: @font-comic;
    color: @color-cyan;
    font-style: italic;
    .text-outline();
}

.impact-magic::after {
    content: 'ZAP!';
    font-family: @font-title;
    color: @color-magenta;
    .text-outline();
    transform: skew(-10deg);
}

@keyframes impact-pop {
    0% {
        transform: translate(-50%, -50%) scale(0);
    }

    50% {
        transform: translate(-50%, -50%) scale(1.5);
    }

    100% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 0;
    }
}

// Screen Shake
.scene.screen-shake {
    animation: shake-hard 0.2s;
}