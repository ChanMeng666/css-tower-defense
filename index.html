<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Tower Defense</title>
    <!-- inject:css -->
    <link rel="stylesheet" href="styles/app.css">
    <!-- endinject -->
    <script src="vendor/prefixfree.min.js"></script>
</head>
<body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="title-container">
            <h1 class="game-title">CSS Tower Defense</h1>
            <p class="subtitle">Defend Your Castle</p>
        </div>
        <button class="start-btn" id="startBtn">Start Game</button>
        <div class="instructions">
            <p>Click on grid cells to place towers</p>
            <p>Defeat all enemies to win!</p>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div class="game-over-screen hidden" id="gameOverScreen">
        <h1 class="game-over-title" id="gameOverTitle">Game Over</h1>
        <p class="final-score">Score: <span id="finalScore">0</span></p>
        <button class="restart-btn" id="restartBtn">Play Again</button>
    </div>

    <!-- Game UI -->
    <div class="game-ui" id="gameUI">
        <div class="top-bar">
            <div class="stat">
                <span class="stat-icon">‚ù§Ô∏è</span>
                <span class="stat-value" id="lives">20</span>
            </div>
            <div class="stat">
                <span class="stat-icon">üí∞</span>
                <span class="stat-value" id="gold">100</span>
            </div>
            <div class="stat">
                <span class="stat-icon">üåä</span>
                <span class="stat-value">Wave <span id="wave">1</span>/<span id="totalWaves">10</span></span>
            </div>
            <div class="stat">
                <span class="stat-icon">üéØ</span>
                <span class="stat-value" id="score">0</span>
            </div>
        </div>

        <!-- Tower Shop -->
        <div class="shop-panel" id="shopPanel">
            <div class="shop-title">Towers</div>
            <div class="tower-options">
                <div class="tower-option" data-tower="arrow" data-cost="50">
                    <div class="tower-preview tower-arrow-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Arrow</span>
                        <span class="tower-cost">üí∞ 50</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="cannon" data-cost="100">
                    <div class="tower-preview tower-cannon-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Cannon</span>
                        <span class="tower-cost">üí∞ 100</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="ice" data-cost="75">
                    <div class="tower-preview tower-ice-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Ice</span>
                        <span class="tower-cost">üí∞ 75</span>
                    </div>
                </div>
                <div class="tower-option" data-tower="magic" data-cost="150">
                    <div class="tower-preview tower-magic-preview"></div>
                    <div class="tower-info">
                        <span class="tower-name">Magic</span>
                        <span class="tower-cost">üí∞ 150</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wave Control -->
        <div class="wave-control">
            <button class="wave-btn" id="startWaveBtn">Start Wave</button>
        </div>
    </div>

    <!-- Game Scene -->
    <div class="scene" id="scene">
        <!-- Multi-layer starfield (box-shadow technique) -->
        <div class="stars-layer-1"></div>
        <div class="stars-layer-2"></div>
        <div class="stars-layer-3"></div>
        
        <!-- Shooting star effect -->
        <div class="shooting-star"></div>
        
        <!-- Decorative Moon/Planet -->
        <div class="moon"></div>
        
        <!-- Enhanced Floating Particle System -->
        <div class="particles">
            <div class="ambient-particles-1"></div>
            <div class="ambient-particles-2"></div>
            <div class="ambient-particles-3"></div>
            <div class="sparkle-particles"></div>
            <div class="sparkle-particles-2"></div>
        </div>
        
        <!-- Weather & Environmental Effects -->
        <div class="weather-effects">
            <div class="dust-particles"></div>
            <div class="leaf-particles">
                <div class="leaf leaf-1"></div>
                <div class="leaf leaf-2"></div>
                <div class="leaf leaf-3"></div>
                <div class="leaf leaf-4"></div>
                <div class="leaf leaf-5"></div>
            </div>
            <div class="firefly-particles"></div>
            <div class="fog-layer"></div>
            <div class="light-rays"></div>
        </div>
        
        <div class="map" id="map">
            <!-- Grid cells will be generated by JavaScript -->
            
            <!-- Enemy container (inside map for 3D transform) -->
            <div class="enemies" id="enemies"></div>
            
            <!-- Projectile container (inside map for 3D transform) -->
            <div class="projectiles" id="projectiles"></div>
            
            <!-- Tower container (inside map for 3D transform) -->
            <div class="towers" id="towers"></div>
            
            <!-- Ground Shadow -->
            <div class="ground-shadow"></div>
        </div>
    </div>

    <!-- Templates -->
    <div class="templates" style="display: none;">
        <!-- Slime Enemy template -->
        <div class="enemy-slime-template">
            <div class="enemy enemy-slime">
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="tentacles">
                    <div class="tentacle t1"></div>
                    <div class="tentacle t2"></div>
                    <div class="tentacle t3"></div>
                    <div class="tentacle t4"></div>
                </div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Goblin Enemy template -->
        <div class="enemy-goblin-template">
            <div class="enemy enemy-goblin">
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="enemy-eyes"></div>
                <div class="arms">
                    <div class="arm left"></div>
                    <div class="arm right"></div>
                </div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Knight Enemy template -->
        <div class="enemy-knight-template">
            <div class="enemy enemy-knight">
                <div class="cape">
                    <div class="cape-main"></div>
                </div>
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="sword"></div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Boss Enemy template -->
        <div class="enemy-boss-template">
            <div class="enemy enemy-boss">
                <div class="energy-rings">
                    <div class="ring-container ring-1">
                        <div class="ring"></div>
                        <div class="orb orb-1"></div>
                        <div class="orb orb-2"></div>
                    </div>
                    <div class="ring-container ring-2">
                        <div class="ring"></div>
                        <div class="orb orb-3"></div>
                        <div class="orb orb-4"></div>
                    </div>
                    <div class="ring-container ring-3">
                        <div class="ring"></div>
                    </div>
                </div>
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="enemy-eyes"></div>
                <div class="spikes">
                    <div class="spike left"></div>
                    <div class="spike right"></div>
                </div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Generic Enemy template (fallback) -->
        <div class="enemy-template">
            <div class="enemy">
                <div class="enemy-body"></div>
                <div class="enemy-face"></div>
                <div class="health-bar">
                    <div class="health-fill"></div>
                </div>
            </div>
        </div>

        <!-- Tower templates -->
        <div class="tower-arrow-template">
            <div class="tower tower-arrow">
                <div class="tower-base"></div>
                <div class="tower-body"></div>
                <div class="tower-top"></div>
                <div class="tower-turret"></div>
            </div>
        </div>

        <div class="tower-cannon-template">
            <div class="tower tower-cannon">
                <div class="tower-base"></div>
                <div class="tower-body"></div>
                <div class="tower-barrel"></div>
            </div>
        </div>

        <div class="tower-ice-template">
            <div class="tower tower-ice">
                <div class="tower-base"></div>
                <div class="tower-crystal"></div>
                <div class="tower-glow"></div>
                <div class="ice-particles"></div>
            </div>
        </div>

        <div class="tower-magic-template">
            <div class="tower tower-magic">
                <div class="tower-base"></div>
                <div class="tower-orb"></div>
                <div class="tower-ring"></div>
                <div class="magic-energy"></div>
            </div>
        </div>

        <!-- Projectile template -->
        <div class="projectile-template">
            <div class="projectile"></div>
        </div>
    </div>

    <!-- inject:js -->
    <script src="scripts/path.js"></script>
    <script src="scripts/enemy.js"></script>
    <script src="scripts/tower.js"></script>
    <script src="scripts/projectile.js"></script>
    <script src="scripts/wave.js"></script>
    <script src="scripts/display.js"></script>
    <script src="scripts/shop.js"></script>
    <script src="scripts/sfx.js"></script>
    <script src="scripts/game.js"></script>
    <script src="scripts/controller.js"></script>
    <!-- endinject -->
</body>
</html>
